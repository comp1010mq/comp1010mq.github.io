<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Copying objects | COMP1010 - Fundamentals of Computer Science</title>
<meta name="generator" content="Jekyll v4.2.1" />
<meta property="og:title" content="Copying objects" />
<meta property="og:locale" content="en_US" />
<link rel="canonical" href="/classes_copies.html" />
<meta property="og:url" content="/classes_copies.html" />
<meta property="og:site_name" content="COMP1010 - Fundamentals of Computer Science" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Copying objects" />
<script type="application/ld+json">
{"url":"/classes_copies.html","@type":"WebPage","headline":"Copying objects","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="COMP1010 - Fundamentals of Computer Science" /></head>
<body><header class="site-header">

  <div class="wrapper">
    <a class="site-title" rel="author" href="/">COMP1010 - Fundamentals of Computer Science</a>
  </div>
</header>
<main class="page-content" aria-label="Content"><style>
  @media screen and (max-width: 700px) {
    .sidebar {
      position: absolute;
      margin: 0;
      overflow-x: hidden;
    }
  }

  @media screen and (min-width: 700px) {
    .sidebar {
      width: 25%;
      position: absolute;
      margin: 0;
      overflow-x: hidden;
    }
  }

  .sidebar a {
    color: black;
  }

  .sidebar ul {
    list-style-type: none;
  }

  .dropdown-content {
    display: none;
    position: relative;
    z-index: 1;
  }

  .dropdown-content a {
    display: block;
    color: black;
    background: white;
    text-align: left;
  }

  .show {display:block;}

  .wrapper {
    margin-left: 25%;
  }

</style>

<div class="sidebar">
  <ul>
        <li class="dropdown" data-name = "COMP1000"> COMP1000 ▼
          <ul id="COMP1000" class="dropdown-content"><a href="/transition_to_processing">Transition to Processing</a><a href="/primitive_operations">Primitive Operations</a><a href="/algorithms">Algorithms</a><a href="/variables">Variables</a><a href="/debugging_processing">Debugging in Processing</a><a href="/conditions">Conditions</a><a href="/loops">Loops</a><a href="/functions">Functions</a><a href="/scope">Scope</a><a href="/composite_data">Compound Data</a><a href="/reference_semantics">Reference Semantics</a><a href="/refactoring">Refactoring</a><a href="/design">Program Design</a></ul>
        </li>
      
        <li class="dropdown" data-name = "COMP1010"> COMP1010 ▼
          <ul id="COMP1010" class="dropdown-content"><a href="/transition_to_java">Transition to Java</a><a href="/debugging">Debugging in Java</a><a href="/unit_testing">Unit Testing</a><a href="/classes_types">Classes - Writing your own Types</a><a href="/classes_copies">Classes - Copying objects</a><a href="/classes_methods">Classes - Functions inside objects</a><a href="/classes_composition">Classes - Composition</a><a href="/classes_array_of_objects">Classes - Array of objects</a><a href="/classes_class_holding_array">Classes - Class holding array(s)</a><a href="/recursion_function_call">Recursion - What goes on during a function call</a><a href="/recursion">Recursion</a><a href="/recursion-strings">Recursion with String data</a><a href="/recursion-tail">Tail-optimized recursion</a><a href="/recursion-arrays">Recursion with arrays</a><a href="/lists">Lists</a><a href="/iteration">Iteration</a><a href="/listOfLists">List of Lists</a><a href="stacks_queues">Stacks and Queues</a><a href="/custom-built-arraylist">Custom-built ArrayList</a><a href="/recursive_data_structures_1">Recursive data structures - 1</a><a href="/recursive_data_structures_2">Recursive data structures - 2</a><a href="/searching">Searching</a></ul>
        </li>
      
        <li><a href="https://github.com/comp1010mq/comp1010mq.github.io">Edit (for staff)</a></li></ul>
</div>


<script>
  document.addEventListener('click', function (e) {
    var target = e.target;
    if (target.tagName && target.tagName.toLowerCase() == "li") {
      document.getElementById(target.dataset.name).classList.toggle("show");
    }
  });
</script>
<div class="wrapper">
        <article class="post">

  <header class="post-header">
    <h1 class="post-title">Copying objects</h1>
  </header>

  <div class="post-content">
    <details class="prereq">
  <summary>Assumed Knowledge:</summary>

  <ul>
    <li><a href="./reference_semantics">Reference Semantics</a></li>
    <li><a href="./classes_types">Classes as Types</a></li>
  </ul>

</details>

<details class="outcomes">
  <summary>Learning Outcomes:</summary>

  <ul>
    <li>Define reference and instance copy.</li>
    <li>Identify a reference copy.</li>
    <li>Differentiate an instance copy from a reference copy.</li>
    <li>Be able to execute both types of object copying.</li>
  </ul>

</details>

<h2 id="author-gaurav-gupta">Author: Gaurav Gupta</h2>

<h1 id="copying-primitive-variables">Copying primitive variables</h1>

<p>When we copy a variable of a primitive data type, into another variable, the <strong>contents</strong> of the variable on the right hand side of the assignment operator are copied over into the contents of the variable on the left hand side of the assignment operator.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1729</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">y</span><span class="o">;</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="o">;</span> <span class="c1">//contents of x copied into y</span>
</code></pre></div></div>

<h3 id="before">Before:</h3>
<p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbiAgQVt4PTE3MjldXG4gIEJbeT0wXVxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcbiAgQVt4PTE3MjldXG4gIEJbeT0wXVxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" alt="" /></a></p>

<h3 id="after">After:</h3>
<p><a href="https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiZ3JhcGggVERcbiAgQVt4PTE3MjldXG4gIEJbeT0xNzI5XVxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0"><img src="https://mermaid.ink/img/eyJjb2RlIjoiZ3JhcGggVERcbiAgQVt4PTE3MjldXG4gIEJbeT0xNzI5XVxuIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0" alt="" /></a></p>

<h1 id="class-to-be-used">Class to be used</h1>

<p>We will use the following class for the rest of this page,</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Rectangle</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">int</span> <span class="n">w</span><span class="o">,</span> <span class="kt">int</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">width</span> <span class="o">=</span> <span class="n">w</span><span class="o">;</span>
		<span class="n">height</span> <span class="o">=</span> <span class="n">h</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h1 id="reference-copy">Reference copy</h1>

<p>Recall the interaction when we copy a variable into another variable. The exact same thing happens when we copy an object into another object, the only difference being that objects hold an address to the location where the instance variables are kept. Hence, it’s this address that’s copied.
In a separate client code, we call this method on an instance of class <code class="language-plaintext highlighter-rouge">Rectangle</code> as,</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Rectangle</span> <span class="n">r1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="nc">Rectangle</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">r1</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In the above example, the contents of <code class="language-plaintext highlighter-rouge">r1</code>, which is the address that <code class="language-plaintext highlighter-rouge">r1</code> holds is copied into the contents of <code class="language-plaintext highlighter-rouge">r2</code>. Thus, <code class="language-plaintext highlighter-rouge">r2</code> holds the same address that <code class="language-plaintext highlighter-rouge">r1</code> holds.</p>

<p><img src="./fig/03-classes-and-objects/referenceCopy.png" alt="" /></p>

<p>We say,</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">r1</code> and <code class="language-plaintext highlighter-rouge">r2</code> are <code class="language-plaintext highlighter-rouge">Rectangle</code> references.</li>
  <li>The collective memory holding instance variables is a <code class="language-plaintext highlighter-rouge">Rectangle</code> instance.</li>
  <li>Since there are two references holding the address to that <code class="language-plaintext highlighter-rouge">instance</code>, the <em>reference count</em> (RC) of that instance is 2.</li>
  <li><code class="language-plaintext highlighter-rouge">r1</code> and <code class="language-plaintext highlighter-rouge">r2</code> are reference copies.</li>
</ul>

<p>If you modify <strong>the contents of</strong> one of the reference copies, the contents of all other reference copies is also modified.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Rectangle</span> <span class="n">r1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="nc">Rectangle</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">r1</span><span class="o">;</span>
		<span class="n">r1</span><span class="o">.</span><span class="na">width</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">r2</span><span class="o">.</span><span class="na">width</span><span class="o">);</span> <span class="c1">//is also 50</span>
		<span class="n">r2</span><span class="o">.</span><span class="na">height</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">r1</span><span class="o">.</span><span class="na">height</span><span class="o">);</span> <span class="c1">//is also 0</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>However, if you modify the reference copy itself, the other reference copies don’t follow.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Rectangle</span> <span class="n">r1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="nc">Rectangle</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">r1</span><span class="o">;</span>

		<span class="nc">Rectangle</span> <span class="n">r3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
		<span class="n">r2</span> <span class="o">=</span> <span class="n">r3</span><span class="o">;</span> <span class="c1">//now r2 is a reference copy of r3, NOT r1</span>

		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">r1</span><span class="o">.</span><span class="na">width</span><span class="o">);</span> <span class="c1">//still 10</span>
		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">r1</span><span class="o">.</span><span class="na">height</span><span class="o">);</span> <span class="c1">//still 20</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="./fig/03-classes-and-objects/referenceCopy2.png" alt="" /></p>

<h1 id="instance-copy">Instance copy</h1>

<p>Instead of creating reference copies, which creates dependencies, we can create a <em>duplicate</em> of an instance and refer to that instead. This is called an <em>instance copy</em>.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Rectangle</span> <span class="n">r1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="nc">Rectangle</span> <span class="n">r2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="n">r1</span><span class="o">.</span><span class="na">width</span><span class="o">,</span> <span class="n">r1</span><span class="o">.</span><span class="na">height</span><span class="o">);</span>		
		<span class="n">r1</span><span class="o">.</span><span class="na">width</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>

		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">r2</span><span class="o">.</span><span class="na">width</span><span class="o">);</span> <span class="c1">//still 10</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="./fig/03-classes-and-objects/instanceCopy.png" alt="" /></p>

<p>In the above example, we passed <code class="language-plaintext highlighter-rouge">r1.width</code> and <code class="language-plaintext highlighter-rouge">r1.height</code> (which are variables of primitive data type) as parameters to the constructor to create <code class="language-plaintext highlighter-rouge">r2</code>.</p>

<p>But one can see that the method above is inefficient, especially if there are numerous instance variables.</p>

<h2 id="copy-constructor">Copy constructor</h2>

<p>We can add a special kind of constructor, known as the <em>copy constructor</em> which is used to create instance copies from a source (passed as parameter).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Rectangle</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kt">int</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">;</span>

	<span class="kd">public</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="kt">int</span> <span class="n">w</span><span class="o">,</span> <span class="kt">int</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">width</span> <span class="o">=</span> <span class="n">w</span><span class="o">;</span>
		<span class="n">height</span> <span class="o">=</span> <span class="n">h</span><span class="o">;</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="nf">Rectangle</span><span class="o">(</span><span class="nc">Rectangle</span> <span class="n">source</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">width</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="na">width</span><span class="o">;</span>
		<span class="n">height</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="na">height</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>With the copy constructor, we can make instance copies easily by simply passing the source object as a parameter to the constructor.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Client</span> <span class="o">{</span>
	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
		<span class="nc">Rectangle</span> <span class="n">r1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">20</span><span class="o">);</span>
		<span class="nc">Rectangle</span> <span class="n">r2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Rectangle</span><span class="o">(</span><span class="n">r1</span><span class="o">);</span> <span class="c1">//invoke copy constructor		</span>
		<span class="n">r1</span><span class="o">.</span><span class="na">width</span> <span class="o">=</span> <span class="mi">50</span><span class="o">;</span>

		<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">r2</span><span class="o">.</span><span class="na">width</span><span class="o">);</span> <span class="c1">//still 10</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

  </div>

</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">COMP1010 - Fundamentals of Computer Science</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">COMP1010 - Fundamentals of Computer Science</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p></p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
